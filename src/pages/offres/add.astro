---
import Layout from '../../layouts/Layout.astro';
import { addOffre } from '../../js/backend.mjs';

let message = '';
if (Astro.request.method === "POST") {
    const formData = await Astro.request.formData();
    const response = await addOffre(formData);
    message = response.message;
}
---

<Layout titre="Ajouter une offre">
    <h1 class="text-2xl font-bold text-center mb-4">Ajouter une offre</h1>
    {message && <p class="mt-2 p-3 border border-gray-300 rounded-md text-center bg-gray-50">{message}</p>}
    <form action="/offres/add" method="POST" enctype="multipart/form-data" class="max-w-md mx-auto">
        <input type="text" name="nomMaison" placeholder="Nom de la maison" required class="w-full mt-2 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-700" />
        <input type="number" name="prix" placeholder="Prix" class="w-full mt-2 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-700" />
        <input type="number" name="nbSdb" placeholder="Nombre de salles de bain" class="w-full mt-2 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-700" />
        <input type="number" name="nbChambres" placeholder="Nombre de chambres" class="w-full mt-2 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-700" />
        <input type="number" name="surface" placeholder="Superficie" class="w-full mt-2 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-700" />
        <input type="file" name="image" class="w-full mt-2 p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-slate-700" />
        <button type="submit" class="w-full mt-4 px-6 py-3 text-white rounded-lg transition-colors duration-200 shadow-md hover:shadow-lg" style="background-color: #334155; hover:background-color: #1e293b;">Ajouter</button>
    </form>
</Layout>
